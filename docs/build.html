

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Build on your laptop &mdash; GACODE 1.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="_static/contentui.css" />
      <link rel="stylesheet" type="text/css" href="_static/css/custom.css?v=a0fb6060" />

  
    <link rel="shortcut icon" href="_static/favicon.ico"/>
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=2882ecd3"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="_static/contentui.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="References" href="zreferences.html" />
    <link rel="prev" title="Prebuilt Environments" href="setup.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            GACODE
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Installation</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="README.html">Using GACODE</a></li>
<li class="toctree-l1"><a class="reference internal" href="setup.html">Prebuilt Environments</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Build on your laptop</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#first-step">First step</a></li>
<li class="toctree-l2"><a class="reference internal" href="#source-code">Source code</a></li>
<li class="toctree-l2"><a class="reference internal" href="#concept-of-platform-files">Concept of platform files</a></li>
<li class="toctree-l2"><a class="reference internal" href="#environment-variables">Environment variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="#openblas">OpenBLAS</a></li>
<li class="toctree-l2"><a class="reference internal" href="#building">Building</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="zreferences.html">References</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Codes</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="cgyro.html">CGYRO</a></li>
<li class="toctree-l1"><a class="reference internal" href="neo.html">NEO</a></li>
<li class="toctree-l1"><a class="reference internal" href="tgyro.html">TGYRO</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Legacy tools</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="gyro.html">GYRO</a></li>
<li class="toctree-l1"><a class="reference internal" href="tglf.html">TGLF</a></li>
<li class="toctree-l1"><a class="reference internal" href="prgen.html">profiles_gen</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Physics</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="geometry.html">Flux-Surface Geometry</a></li>
<li class="toctree-l1"><a class="reference internal" href="rotation.html">Rotation Theory</a></li>
<li class="toctree-l1"><a class="reference internal" href="input_gacode.html">input.gacode</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Misc</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="performance.html">Computational Performance</a></li>
<li class="toctree-l1"><a class="reference internal" href="workshop.html">CGYRO Workshop 2022</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">GACODE</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Build on your laptop</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="build-on-your-laptop">
<h1>Build on your laptop<a class="headerlink" href="#build-on-your-laptop" title="Link to this heading"></a></h1>
<section id="first-step">
<h2>First step<a class="headerlink" href="#first-step" title="Link to this heading"></a></h2>
<p>You will need suitable python and fortran environments. There is detailed help for</p>
<ul class="simple">
<li><p><a class="reference internal" href="build/build_list.html#buildlinux"><span class="std std-ref">Linux MINT/UBUNTU users</span></a></p></li>
<li><p><a class="reference internal" href="build/build_list.html#buildosx"><span class="std std-ref">OSX users</span></a></p></li>
<li><p><a class="reference internal" href="build/build_list.html#buildconda"><span class="std std-ref">Conda users</span></a></p></li>
</ul>
<p>If you need more help, please don’t hesitate to raise an issue at <a class="reference external" href="https://github.com/gafusion/gacode/issues">https://github.com/gafusion/gacode/issues</a>.</p>
</section>
<section id="source-code">
<h2>Source code<a class="headerlink" href="#source-code" title="Link to this heading"></a></h2>
<p>You should clone the gacode repository from GitHub. This was you can keep your installation up to date</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ git clone git@github.com:gafusion/gacode.git
</pre></div>
</div>
</section>
<section id="concept-of-platform-files">
<h2>Concept of platform files<a class="headerlink" href="#concept-of-platform-files" title="Link to this heading"></a></h2>
<p>In order to compile the full GACODE package on a new machine, a version of the <strong>platform files</strong> must be selected. You can use existing ones or create your own.  After cloning the repository, you can query the existing platforms using</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ ./gacode/shared/bin/gacode_platforms
</pre></div>
</div>
<p>If you decide to create new platform files (say, for a new platform MINE) then create the following files, starting from one of the existing ones (say, CONDA_OMPI_GNU):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$GACODE_ROOT/platform/build/make.inc.MINE
$GACODE_ROOT/platform/exec/exec.MINE
$GACODE_ROOT/platform/env/env.MINE (if needed)
</pre></div>
</div>
<p>Numerous templates for each of these files can be found in the specific folders, and most often there will be an existing machine files that is almost exactly what you need</p>
</section>
<section id="environment-variables">
<h2>Environment variables<a class="headerlink" href="#environment-variables" title="Link to this heading"></a></h2>
<p>To use your new platform files, enter the following lines in your shell RC file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>export GACODE_PLATFORM=MINE
export GACODE_ROOT=$HOME/gacode
. $GACODE_ROOT/shared/bin/gacode_setup
. $GACODE_ROOT/platform/env/env.MINE (if needed)
</pre></div>
</div>
</section>
<section id="openblas">
<h2>OpenBLAS<a class="headerlink" href="#openblas" title="Link to this heading"></a></h2>
<p>Using system provided builds is better, but when building from scrath with gfortran, we recommend using <a class="reference external" href="https://github.com/xianyi/OpenBLAS.git">OpenBLAS</a>. It is important to build with <strong>single-threaded</strong> settings. In the Makefile.rule file in the top-level OpenBLAS directory, set:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">BINARY</span><span class="o">=</span><span class="mi">64</span>
<span class="n">USE_THREAD</span><span class="o">=</span><span class="mi">0</span>
<span class="n">USE_LOCKING</span><span class="o">=</span><span class="mi">1</span>
<span class="n">NO_SHARED</span><span class="o">=</span><span class="mi">1</span>
<span class="n">NO_CBLAS</span><span class="o">=</span><span class="mi">1</span>
<span class="n">NO_LAPACKE</span><span class="o">=</span><span class="mi">1</span>
</pre></div>
</div>
<p>You can find an example of linking to OpenBLAS in the <a class="reference external" href="https://github.com/gafusion/gacode/blob/master/platform/build/make.inc.MINT">MINT platform file</a>. To test the thread safety, you can use the test program in shared/hybridtest:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cd gacode/shared/hybridtest
$ make clean ; make
$ ./test
</pre></div>
</div>
</section>
<section id="building">
<h2>Building<a class="headerlink" href="#building" title="Link to this heading"></a></h2>
<p>To build the entire GACODE project, type:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cd $GACODE_ROOT ; make
</pre></div>
</div>
<p>To build just one of the tools, go into the specific subdirectory:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cd $GACODE_ROOT/cgyro ; make
</pre></div>
</div>
<p>To test that the build is successful, you can run regression tests:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ neo -r
$ tglf -r
$ cgyro -r -n 4 -nomp 2
</pre></div>
</div>
<p>This last command run the complete CGYRO regression test suite using 4 MPI tasks and 2 OpenMP threads (8 total threads).</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="setup.html" class="btn btn-neutral float-left" title="Prebuilt Environments" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="zreferences.html" class="btn btn-neutral float-right" title="References" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2000-2025.
      <span class="lastupdated">Last updated on Jul 07, 2025.
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>