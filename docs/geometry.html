

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>FLUX-SURFACE GEOMETRY &mdash; GACODE</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/contentui.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="_static/favicon.ico"/>
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/contentui.js"></script>
        <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="PLASMA ROTATION" href="rotation.html" />
    <link rel="prev" title="profiles_gen" href="prgen.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> GACODE
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption" role="heading"><span class="caption-text">Software</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="license.html">GACODE License</a></li>
<li class="toctree-l1"><a class="reference internal" href="download.html">Download and user agreement</a></li>
<li class="toctree-l1"><a class="reference internal" href="setup.html">Environment setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="build.html">Build from sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="zreferences.html">References</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Codes</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="neo.html">NEO</a></li>
<li class="toctree-l1"><a class="reference internal" href="tgyro.html">TGYRO</a></li>
<li class="toctree-l1"><a class="reference internal" href="cgyro.html">CGYRO</a></li>
<li class="toctree-l1"><a class="reference internal" href="gyro.html">GYRO</a></li>
<li class="toctree-l1"><a class="reference internal" href="tglf.html">TGLF</a></li>
<li class="toctree-l1"><a class="reference internal" href="prgen.html">profiles_gen</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Physics</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">FLUX-SURFACE GEOMETRY</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#coordinates">Coordinates</a></li>
<li class="toctree-l2"><a class="reference internal" href="#bounding-box-method">Bounding-box method</a></li>
<li class="toctree-l2"><a class="reference internal" href="#effective-field">Effective field</a></li>
<li class="toctree-l2"><a class="reference internal" href="#equilibria">Equilibria</a></li>
<li class="toctree-l2"><a class="reference internal" href="#table-of-geometry-parameters">Table of geometry parameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="#magnetic-field-orientation">Magnetic field orientation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="rotation.html">PLASMA ROTATION</a></li>
<li class="toctree-l1"><a class="reference internal" href="input_gacode.html">input.gacode</a></li>
<li class="toctree-l1"><a class="reference internal" href="shortfall.html">DIII-D L-mode shortfall</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">GACODE</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>FLUX-SURFACE GEOMETRY</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/geometry.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="flux-surface-geometry">
<h1>FLUX-SURFACE GEOMETRY<a class="headerlink" href="#flux-surface-geometry" title="Permalink to this headline">¶</a></h1>
<div class="section" id="coordinates">
<h2>Coordinates<a class="headerlink" href="#coordinates" title="Permalink to this headline">¶</a></h2>
<p>GYRO/CGYRO/NEO use a right-handed (positively-oriented), field-aligned coordinate system
<span class="math notranslate nohighlight">\((r,\theta,\alpha)\)</span> and the Clebsch field representation</p>
<div class="math notranslate nohighlight">
\[\mathbf{B} =\nabla \alpha \times \nabla \psi (r) \; ,\]</div>
<p>where <span class="math notranslate nohighlight">\(\psi\)</span> is the poloidal flux divided by <span class="math notranslate nohighlight">\(2\pi\)</span> and</p>
<div class="math notranslate nohighlight">
\[\alpha =\varphi +\nu (r,\theta )\]</div>
<p>is the Clebsch angle. Here, <span class="math notranslate nohighlight">\(\varphi\)</span> is the <strong>toroidal angle</strong>, oriented as shown
in the figure below, and <span class="math notranslate nohighlight">\(\theta\)</span> is the <strong>poloidal angle</strong> which increases as one
moves counterclockwise along the flux-surface (shown in blue).</p>
<p>The coordinate systems <span class="math notranslate nohighlight">\((R,Z,\varphi)\)</span> and <span class="math notranslate nohighlight">\((r,\theta,\varphi)\)</span> are positively oriented.</p>
</div>
<div class="section" id="bounding-box-method">
<h2>Bounding-box method<a class="headerlink" href="#bounding-box-method" title="Permalink to this headline">¶</a></h2>
<p>In the MXH parameterization <span id="id1">[<a class="reference internal" href="zreferences.html#id3" title="R. Arbon, J. Candy, and E.A. Belli. Rapidly-convergent flux-surface shape parameterization. Plasma Phys. Control. Fusion, 63:012001, 2020. doi:10.1088/1361-6587/abc63b.">ACB20</a>]</span>, we use the bounding-box method to define</p>
<ul class="simple">
<li><p><strong>minor radius</strong> <span class="math notranslate nohighlight">\(r\)</span></p></li>
<li><p><strong>major radius</strong> <span class="math notranslate nohighlight">\(R_0\)</span></p></li>
<li><p><strong>elongation</strong> <span class="math notranslate nohighlight">\(\kappa\)</span></p></li>
<li><p><strong>elevation</strong> <span class="math notranslate nohighlight">\(Z_0\)</span></p></li>
</ul>
<p>via the flux-surface contour extrema</p>
<div class="math notranslate nohighlight">
\[\begin{split}2 r        = &amp; \max_\ell(R) - \min_\ell(R) \; , \\
2 \kappa r = &amp; \max_\ell(Z) - \min_\ell(Z) \; , \\
2 R_0      = &amp; \max_\ell(R) + \min_\ell(R) \; , \\
2 Z_0      = &amp; \max_\ell(Z) + \min_\ell(Z) \; .\end{split}\]</div>
</div>
<div class="section" id="effective-field">
<h2>Effective field<a class="headerlink" href="#effective-field" title="Permalink to this headline">¶</a></h2>
<p>The effective field strength, <span class="math notranslate nohighlight">\(B_{\rm {unit}}\)</span>, is defined as</p>
<div class="math notranslate nohighlight">
\[B_\mathrm{unit} = \frac{1}{r} \frac{d\chi _{t}}{dr} \; ,\]</div>
<p>where <span class="math notranslate nohighlight">\(\chi _{t}\)</span> is the toroidal flux divided by <span class="math notranslate nohighlight">\(2\pi\)</span>. This gives the
roughly equivalent field that would be obtained if the flux surface was deformed to a circle.</p>
</div>
<div class="section" id="equilibria">
<h2>Equilibria<a class="headerlink" href="#equilibria" title="Permalink to this headline">¶</a></h2>
<p>GYRO/CGYRO/NEO can be run using <strong>circular equilibrium</strong> or <strong>shaped Grad-Shafranov equilibrium</strong>.</p>
<p><strong>(1) Circular equilibrium</strong></p>
<p>The flux surfaces, which are <strong>not</strong> local G-S equilibria, have the form:</p>
<blockquote>
<div><div class="math notranslate nohighlight">
\[\begin{split}R(r,\theta) &amp;= R_0 + r \cos \theta \\
Z(r,\theta) &amp;= r \sin \theta \\\end{split}\]</div>
</div></blockquote>
<p>where <span class="math notranslate nohighlight">\(\nu(r,\theta) = -q(r) \theta\)</span>.</p>
<ul class="simple">
<li><p>CGYRO: <a class="reference internal" href="cgyro/cgyro_list.html#cgyro-equilibrium-model"><span class="std std-ref">EQUILIBRIUM_MODEL</span></a> = 1</p></li>
<li><p>NEO: <a class="reference internal" href="neo/neo_list.html#neo-equilibrium-model"><span class="std std-ref">EQUILIBRIUM_MODEL</span></a> = 0</p></li>
</ul>
<p><strong>(2) Shaped Grad-Shafranov equilibrium</strong></p>
<p>The flux surfaces, which are local G-S equilibria, have the new MXH3 parameterization <span id="id2">[<a class="reference internal" href="zreferences.html#id3" title="R. Arbon, J. Candy, and E.A. Belli. Rapidly-convergent flux-surface shape parameterization. Plasma Phys. Control. Fusion, 63:012001, 2020. doi:10.1088/1361-6587/abc63b.">ACB20</a>]</span>:</p>
<div class="math notranslate nohighlight">
\[\begin{split}R(r,\theta) &amp;= R_0(r) + r \cos \theta_R \\
Z(r,\theta) &amp;= Z_0(r) + \kappa(r) r \sin \theta\end{split}\]</div>
<p>where <span class="math notranslate nohighlight">\(\nu(r,\theta)\)</span> is computed numerically.  The harmonic angle <span class="math notranslate nohighlight">\(\theta_R\)</span> is</p>
<div class="math notranslate nohighlight">
\[\theta_R = \theta + c_0(r) + \sum_{n=1}^{3} \left[ c_n(r) \cos n \theta + s_n(r) \sin n \theta \right]\]</div>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(c_n\)</span> are <em>anti-symmetric</em> moments and <span class="math notranslate nohighlight">\(s_n\)</span> are <em>symmetric</em> moments.</p></li>
<li><p>CGYRO: <a class="reference internal" href="cgyro/cgyro_list.html#cgyro-equilibrium-model"><span class="std std-ref">EQUILIBRIUM_MODEL</span></a> = 2</p></li>
<li><p>NEO: <a class="reference internal" href="neo/neo_list.html#neo-equilibrium-model"><span class="std std-ref">EQUILIBRIUM_MODEL</span></a> = 2 or <a class="reference internal" href="neo/neo_list.html#neo-profile-equilibrium-model"><span class="std std-ref">PROFILE_EQUILIBRIUM_MODEL</span></a> = 1</p></li>
<li><p>For experimental profiles, shape parameters are auto-generated from profile data.</p></li>
</ul>
<div class="figure align-center">
<a class="reference internal image-reference" href="_images/mxh.png"><img alt="Shape moments" src="_images/mxh.png" style="width: 90%;" /></a>
</div>
</div>
<div class="section" id="table-of-geometry-parameters">
<h2>Table of geometry parameters<a class="headerlink" href="#table-of-geometry-parameters" title="Permalink to this headline">¶</a></h2>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Symbol</p></th>
<th class="head"><p>input.cgyro parameter</p></th>
<th class="head"><p>input.neo parameter</p></th>
<th class="head"><p>meaning</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="math notranslate nohighlight">\(r/a\)</span></p></td>
<td><p><a class="reference internal" href="cgyro/cgyro_list.html#cgyro-rmin"><span class="std std-ref">RMIN</span></a></p></td>
<td><p><a class="reference internal" href="neo/neo_list.html#neo-rmin-over-a"><span class="std std-ref">RMIN_OVER_A</span></a></p></td>
<td><p>minor radius</p></td>
</tr>
<tr class="row-odd"><td><p><span class="math notranslate nohighlight">\(R_0(r)/a\)</span></p></td>
<td><p><a class="reference internal" href="cgyro/cgyro_list.html#cgyro-rmaj"><span class="std std-ref">RMAJ</span></a></p></td>
<td><p><a class="reference internal" href="neo/neo_list.html#neo-rmaj-over-a"><span class="std std-ref">RMAJ_OVER_A</span></a></p></td>
<td><p>major radius</p></td>
</tr>
<tr class="row-even"><td><p><span class="math notranslate nohighlight">\(\partial R_0/\partial r\)</span></p></td>
<td><p><a class="reference internal" href="cgyro/cgyro_list.html#cgyro-shift"><span class="std std-ref">SHIFT</span></a></p></td>
<td><p><a class="reference internal" href="neo/neo_list.html#neo-shift"><span class="std std-ref">SHIFT</span></a></p></td>
<td><p>Shafranov shift</p></td>
</tr>
<tr class="row-odd"><td><p><span class="math notranslate nohighlight">\(Z_0(r)/a\)</span></p></td>
<td><p><a class="reference internal" href="cgyro/cgyro_list.html#cgyro-zmag"><span class="std std-ref">ZMAG</span></a></p></td>
<td><p><a class="reference internal" href="neo/neo_list.html#neo-zmag-over-a"><span class="std std-ref">ZMAG_OVER_A</span></a></p></td>
<td><p>elevation</p></td>
</tr>
<tr class="row-even"><td><p><span class="math notranslate nohighlight">\(\partial Z_0/\partial r\)</span></p></td>
<td><p><a class="reference internal" href="cgyro/cgyro_list.html#cgyro-dzmag"><span class="std std-ref">DZMAG</span></a></p></td>
<td><p><a class="reference internal" href="neo/neo_list.html#neo-s-zmag"><span class="std std-ref">S_ZMAG</span></a></p></td>
<td><p>elevation shift</p></td>
</tr>
<tr class="row-odd"><td><p><span class="math notranslate nohighlight">\(q\)</span></p></td>
<td><p><a class="reference internal" href="cgyro/cgyro_list.html#cgyro-q"><span class="std std-ref">Q</span></a></p></td>
<td><p><a class="reference internal" href="neo/neo_list.html#neo-q"><span class="std std-ref">Q</span></a></p></td>
<td><p>safety factor</p></td>
</tr>
<tr class="row-even"><td><p><span class="math notranslate nohighlight">\(s\)</span></p></td>
<td><p><a class="reference internal" href="cgyro/cgyro_list.html#cgyro-s"><span class="std std-ref">S</span></a></p></td>
<td><p><a class="reference internal" href="neo/neo_list.html#neo-shear"><span class="std std-ref">SHEAR</span></a></p></td>
<td><p>shear</p></td>
</tr>
<tr class="row-odd"><td><p><span class="math notranslate nohighlight">\(\kappa\)</span></p></td>
<td><p><a class="reference internal" href="cgyro/cgyro_list.html#cgyro-kappa"><span class="std std-ref">KAPPA</span></a></p></td>
<td><p><a class="reference internal" href="neo/neo_list.html#neo-kappa"><span class="std std-ref">KAPPA</span></a></p></td>
<td><p>elongation</p></td>
</tr>
<tr class="row-even"><td><p><span class="math notranslate nohighlight">\(s_\kappa\)</span></p></td>
<td><p><a class="reference internal" href="cgyro/cgyro_list.html#cgyro-s-kappa"><span class="std std-ref">S_KAPPA</span></a></p></td>
<td><p><a class="reference internal" href="neo/neo_list.html#neo-s-kappa"><span class="std std-ref">S_KAPPA</span></a></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><span class="math notranslate nohighlight">\(\delta = \sin s_1\)</span></p></td>
<td><p><a class="reference internal" href="cgyro/cgyro_list.html#cgyro-delta"><span class="std std-ref">DELTA</span></a></p></td>
<td><p><a class="reference internal" href="neo/neo_list.html#neo-delta"><span class="std std-ref">DELTA</span></a></p></td>
<td><p>triangularity</p></td>
</tr>
<tr class="row-even"><td><p><span class="math notranslate nohighlight">\(s_\delta\)</span></p></td>
<td><p><a class="reference internal" href="cgyro/cgyro_list.html#cgyro-s-delta"><span class="std std-ref">S_DELTA</span></a></p></td>
<td><p><a class="reference internal" href="neo/neo_list.html#neo-s-delta"><span class="std std-ref">S_DELTA</span></a></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><span class="math notranslate nohighlight">\(\zeta = -s_2\)</span></p></td>
<td><p><a class="reference internal" href="cgyro/cgyro_list.html#cgyro-zeta"><span class="std std-ref">ZETA</span></a></p></td>
<td><p><a class="reference internal" href="neo/neo_list.html#neo-zeta"><span class="std std-ref">ZETA</span></a></p></td>
<td><p>squareness</p></td>
</tr>
<tr class="row-even"><td><p><span class="math notranslate nohighlight">\(s_\zeta\)</span></p></td>
<td><p><a class="reference internal" href="cgyro/cgyro_list.html#cgyro-s-zeta"><span class="std std-ref">S_ZETA</span></a></p></td>
<td><p><a class="reference internal" href="neo/neo_list.html#neo-s-zeta"><span class="std std-ref">S_ZETA</span></a></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><span class="math notranslate nohighlight">\(c_0\)</span></p></td>
<td><p><a class="reference internal" href="cgyro/cgyro_list.html#cgyro-shape-cos0"><span class="std std-ref">SHAPE_COS0</span></a></p></td>
<td><p><a class="reference internal" href="neo/neo_list.html#neo-shape-cos0"><span class="std std-ref">SHAPE_COS0</span></a></p></td>
<td><p>tilt</p></td>
</tr>
<tr class="row-even"><td><p><span class="math notranslate nohighlight">\(s_{c_0}\)</span></p></td>
<td><p><a class="reference internal" href="cgyro/cgyro_list.html#cgyro-shape-s-cos0"><span class="std std-ref">SHAPE_S_COS0</span></a></p></td>
<td><p><a class="reference internal" href="neo/neo_list.html#neo-shape-s-cos0"><span class="std std-ref">SHAPE_S_COS0</span></a></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><span class="math notranslate nohighlight">\(c_1\)</span></p></td>
<td><p><a class="reference internal" href="cgyro/cgyro_list.html#cgyro-shape-cos1"><span class="std std-ref">SHAPE_COS1</span></a></p></td>
<td><p><a class="reference internal" href="neo/neo_list.html#neo-shape-cos1"><span class="std std-ref">SHAPE_COS1</span></a></p></td>
<td><p>ovality</p></td>
</tr>
<tr class="row-even"><td><p><span class="math notranslate nohighlight">\(s_{c_1}\)</span></p></td>
<td><p><a class="reference internal" href="cgyro/cgyro_list.html#cgyro-shape-s-cos1"><span class="std std-ref">SHAPE_S_COS1</span></a></p></td>
<td><p><a class="reference internal" href="neo/neo_list.html#neo-shape-s-cos1"><span class="std std-ref">SHAPE_S_COS1</span></a></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><span class="math notranslate nohighlight">\(c_2\)</span></p></td>
<td><p><a class="reference internal" href="cgyro/cgyro_list.html#cgyro-shape-cos2"><span class="std std-ref">SHAPE_COS2</span></a></p></td>
<td><p><a class="reference internal" href="neo/neo_list.html#neo-shape-cos2"><span class="std std-ref">SHAPE_COS2</span></a></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><span class="math notranslate nohighlight">\(s_{c_2}\)</span></p></td>
<td><p><a class="reference internal" href="cgyro/cgyro_list.html#cgyro-shape-s-cos2"><span class="std std-ref">SHAPE_S_COS2</span></a></p></td>
<td><p><a class="reference internal" href="neo/neo_list.html#neo-shape-s-cos2"><span class="std std-ref">SHAPE_S_COS2</span></a></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><span class="math notranslate nohighlight">\(c_3\)</span></p></td>
<td><p><a class="reference internal" href="cgyro/cgyro_list.html#cgyro-shape-cos3"><span class="std std-ref">SHAPE_COS3</span></a></p></td>
<td><p><a class="reference internal" href="neo/neo_list.html#neo-shape-cos3"><span class="std std-ref">SHAPE_COS3</span></a></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><span class="math notranslate nohighlight">\(s_{c_3}\)</span></p></td>
<td><p><a class="reference internal" href="cgyro/cgyro_list.html#cgyro-shape-s-cos3"><span class="std std-ref">SHAPE_S_COS3</span></a></p></td>
<td><p><a class="reference internal" href="neo/neo_list.html#neo-shape-s-cos3"><span class="std std-ref">SHAPE_S_COS3</span></a></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><span class="math notranslate nohighlight">\(s_3\)</span></p></td>
<td><p><a class="reference internal" href="cgyro/cgyro_list.html#cgyro-shape-sin3"><span class="std std-ref">SHAPE_SIN3</span></a></p></td>
<td><p><a class="reference internal" href="neo/neo_list.html#neo-shape-sin3"><span class="std std-ref">SHAPE_SIN3</span></a></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><span class="math notranslate nohighlight">\(s_{s_3}\)</span></p></td>
<td><p><a class="reference internal" href="cgyro/cgyro_list.html#cgyro-shape-s-sin3"><span class="std std-ref">SHAPE_S_SIN3</span></a></p></td>
<td><p><a class="reference internal" href="neo/neo_list.html#neo-shape-s-sin3"><span class="std std-ref">SHAPE_S_SIN3</span></a></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><span class="math notranslate nohighlight">\(\beta_e\)</span></p></td>
<td><p><a class="reference internal" href="cgyro/cgyro_list.html#cgyro-betae-unit"><span class="std std-ref">BETAE_UNIT</span></a></p></td>
<td><p>NA</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><span class="math notranslate nohighlight">\(\beta_*\)</span> scaling</p></td>
<td><p><a class="reference internal" href="cgyro/cgyro_list.html#cgyro-beta-star-scale"><span class="std std-ref">BETA_STAR_SCALE</span></a></p></td>
<td><p><a class="reference internal" href="neo/neo_list.html#neo-beta-star"><span class="std std-ref">BETA_STAR</span></a></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>BTCCW</p></td>
<td><p><a class="reference internal" href="cgyro/cgyro_list.html#cgyro-btccw"><span class="std std-ref">BTCCW</span></a></p></td>
<td><p><a class="reference internal" href="neo/neo_list.html#neo-btccw"><span class="std std-ref">BTCCW</span></a></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>IPCCW</p></td>
<td><p><a class="reference internal" href="cgyro/cgyro_list.html#cgyro-ipccw"><span class="std std-ref">IPCCW</span></a></p></td>
<td><p><a class="reference internal" href="neo/neo_list.html#neo-ipccw"><span class="std std-ref">IPCCW</span></a></p></td>
<td></td>
</tr>
</tbody>
</table>
<p>For further information about geometry and normalization conventions, consult the GYRO Technical Guide   <span id="id3">[<a class="reference internal" href="zreferences.html#id31" title="J. Candy and E. Belli. GYRO Technical Guide. General Atomics Technical Report, 2010.">CB10</a>]</span>.</p>
</div>
<div class="section" id="magnetic-field-orientation">
<h2>Magnetic field orientation<a class="headerlink" href="#magnetic-field-orientation" title="Permalink to this headline">¶</a></h2>
<p>GACODE uses a right-handed (positively-oriented), field-aligned coordinate system <span class="math notranslate nohighlight">\((r,\theta,\varphi)\)</span>, whereas DIII-D uses a (positively-oriented) cylindrical system <span class="math notranslate nohighlight">\((R,\phi,Z)\)</span>.  Looking down on the tokamak from above, the orientation of the GACODE toroidal angle is clockwise, whereas the DIII-D toroidal angle is counter-clockwise:</p>
<div class="figure align-center">
<a class="reference internal image-reference" href="_images/Orient_gacode.png"><img alt="flux surface" src="_images/Orient_gacode.png" style="width: 600.0px; height: 600.0px;" /></a>
</div>
<div class="figure align-center">
<a class="reference internal image-reference" href="_images/Orient_d3d.png"><img alt="flux surface" src="_images/Orient_d3d.png" style="width: 600.0px; height: 600.0px;" /></a>
</div>
<p>In reality, quantities like the safety factor and poloidal flux have definite signs. Historically, these signs have been suppressed or neglected in both theory and modeling. For proper treatment of momentum transport, however, these signs must be retained. We can infer typically neglected signs by knowing <a class="reference internal" href="cgyro/cgyro_list.html#cgyro-ipccw"><span class="std std-ref">IPCCW</span></a> and <a class="reference internal" href="cgyro/cgyro_list.html#cgyro-btccw"><span class="std std-ref">BTCCW</span></a>. For example:</p>
<ul class="simple">
<li><p>sign(<span class="math notranslate nohighlight">\(B_{\rm tor}\)</span>) = -BTCCW</p></li>
<li><p>sign(<span class="math notranslate nohighlight">\(B_{\rm pol}\)</span>) = -IPCCW</p></li>
<li><p>sign(<span class="math notranslate nohighlight">\(\psi_{\rm pol}\)</span>) = -IPCCW</p></li>
<li><p>sign(<span class="math notranslate nohighlight">\(q\)</span>) = IPCCW <span class="math notranslate nohighlight">\(\times\)</span> BTCCW</p></li>
</ul>
<p>The standard configuration in DIII-D is shown below.</p>
<div class="figure align-center">
<a class="reference internal image-reference" href="_images/Orient_d3d_standard.png"><img alt="flux surface" src="_images/Orient_d3d_standard.png" style="width: 600.0px; height: 600.0px;" /></a>
</div>
<p>This corresponds to <a class="reference internal" href="cgyro/cgyro_list.html#cgyro-ipccw"><span class="std std-ref">IPCCW</span></a> = 1 and <a class="reference internal" href="cgyro/cgyro_list.html#cgyro-btccw"><span class="std std-ref">BTCCW</span></a> =-1.  Thus, in GACODE coordinates, we expect:</p>
<ul class="simple">
<li><p>sign(<span class="math notranslate nohighlight">\(B_{\rm tor}\)</span>) = 1</p></li>
<li><p>sign(<span class="math notranslate nohighlight">\(B_{\rm pol}\)</span>) = -1</p></li>
<li><p>sign(<span class="math notranslate nohighlight">\(\psi_{\rm pol}\)</span>) = -1</p></li>
<li><p>sign(<span class="math notranslate nohighlight">\(q\)</span>) = -1</p></li>
</ul>
<blockquote>
<div><p>In other words, the safety factor and poloidal flux are negative in the typical case. This will be reflected in a properly-constructed <a class="reference internal" href="input_gacode.html"><span class="doc">input.gacode</span></a> file.</p>
</div></blockquote>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="rotation.html" class="btn btn-neutral float-right" title="PLASMA ROTATION" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="prgen.html" class="btn btn-neutral float-left" title="profiles_gen" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2010-2021.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>