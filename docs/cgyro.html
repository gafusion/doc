

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>CGYRO &mdash; GACODE</title>
  

  
  
  
  

  

  
  
    

  

  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Tabular list for input.cgyro" href="cgyro/cgyro_table.html" />
    <link rel="prev" title="PLOT" href="tgyro/plot.html" /> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> GACODE
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Software</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="download.html">Download and user agreement</a></li>
<li class="toctree-l1"><a class="reference internal" href="setup.html">Environment setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="build.html">Build from sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="zreferences.html">References</a></li>
</ul>
<p class="caption"><span class="caption-text">Codes</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="neo.html">NEO</a></li>
<li class="toctree-l1"><a class="reference internal" href="tgyro.html">TGYRO</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">CGYRO</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#quick-links">Quick links</a><ul>
<li class="toctree-l3"><a class="reference internal" href="cgyro/cgyro_table.html">Tabular list for input.cgyro</a></li>
<li class="toctree-l3"><a class="reference internal" href="cgyro/cgyro_list.html">Alphabetical list for input.cgyro</a></li>
<li class="toctree-l3"><a class="reference internal" href="cgyro/outputs.html">CGYRO output files</a></li>
<li class="toctree-l3"><a class="reference internal" href="cgyro/plot.html">CGYRO data interface and plotting</a></li>
<li class="toctree-l3"><a class="reference internal" href="cgyro/cgyro_platforms.html">Supported CGYRO Platforms</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="#data-input">Data input</a></li>
<li class="toctree-l2"><a class="reference internal" href="#data-output-python-interface-and-plotting">Data output, python interface, and plotting</a></li>
<li class="toctree-l2"><a class="reference internal" href="#normalization">Normalization</a></li>
<li class="toctree-l2"><a class="reference internal" href="#running-cases">Running cases</a></li>
<li class="toctree-l2"><a class="reference internal" href="#batch-submission">Batch submission</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="gyro.html">GYRO</a></li>
<li class="toctree-l1"><a class="reference internal" href="tglf.html">TGLF</a></li>
</ul>
<p class="caption"><span class="caption-text">Physics</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="geometry.html">FLUX-SURFACE GEOMETRY</a></li>
<li class="toctree-l1"><a class="reference internal" href="rotation.html">PLASMA ROTATION</a></li>
<li class="toctree-l1"><a class="reference internal" href="input_profiles.html">input.profiles</a></li>
<li class="toctree-l1"><a class="reference internal" href="shortfall.html">DIII-D L-mode shortfall</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">GACODE</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>CGYRO</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/cgyro.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="cgyro">
<h1>CGYRO<a class="headerlink" href="#cgyro" title="Permalink to this headline">¶</a></h1>
<div class="section" id="quick-links">
<h2>Quick links<a class="headerlink" href="#quick-links" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="cgyro/cgyro_table.html">Tabular list for input.cgyro</a></li>
<li class="toctree-l1"><a class="reference internal" href="cgyro/cgyro_list.html">Alphabetical list for input.cgyro</a></li>
<li class="toctree-l1"><a class="reference internal" href="cgyro/outputs.html">CGYRO output files</a></li>
<li class="toctree-l1"><a class="reference internal" href="cgyro/plot.html">CGYRO data interface and plotting</a></li>
<li class="toctree-l1"><a class="reference internal" href="cgyro/cgyro_platforms.html">Supported CGYRO Platforms</a><ul>
<li class="toctree-l2"><a class="reference internal" href="cgyro/cgyro_cori.html">Running CGYRO on NERSC Cori</a></li>
<li class="toctree-l2"><a class="reference internal" href="cgyro/cgyro_titan.html">Running CGYRO on OLCF Titan</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>CGYRO is a multi-species spectral gyrokinetic solver with sonic rotation capability.
Over the last decade the fusion community has focused its modeling efforts
primarily on the core region. A popular kinetic code used for this purpose
was GYRO <a class="reference internal" href="zreferences.html#candy-2003" id="id1">[CW03b]</a><a class="reference internal" href="zreferences.html#candy-2003b" id="id2">[CW03a]</a><a class="reference internal" href="zreferences.html#candy-2004a" id="id3">[CWD04]</a><a class="reference internal" href="zreferences.html#candy-2010" id="id4">[CB10]</a>.
Thousands of nonlinear
simulations with GYRO have informed the fusion community’s understanding of
core plasma turbulence <a class="reference internal" href="zreferences.html#kinsey-2005" id="id5">[KWC05]</a><a class="reference internal" href="zreferences.html#kinsey-2006" id="id6">[KWC06]</a><a class="reference internal" href="zreferences.html#kinsey-2007" id="id7">[KWC07]</a><a class="reference internal" href="zreferences.html#howard-2016b" id="id8">[HHW+16]</a>
and provided a <em>transport database</em> for the calibration of reduced transport models
such as TGLF <a class="reference internal" href="zreferences.html#staebler-2007" id="id9">[SKW07]</a>.  GYRO was the first global electromagnetic solver,
and pioneered the development of numerical algorithms for the GK equations
with kinetic electrons.  It is formulated in real space and like all global solvers
requires <em>ad hoc</em> absorbing-layer boundary conditions when simulating cases
with profile variation.  This approach is suitable for core turbulence simulations,
which cover a large radial region and are dominated by low wavenumbers.  More recently,
as the understanding of core transport has become increasingly complete, the cutting
edge of research moved radially toward the pedestal region, where plasmas are
characterized by larger collisionality and steeper pressure gradients that
greatly modify the turbulent phenomena at play. This motivated the development,
from scratch, of the CGYRO code <a class="reference internal" href="zreferences.html#candy-2016" id="id10">[CBB16]</a><a class="reference internal" href="zreferences.html#belli-2017" id="id11">[BC17]</a><a class="reference internal" href="zreferences.html#candy-2018" id="id12">[CB18]</a><a class="reference internal" href="zreferences.html#belli-2018" id="id13">[BC18]</a>
to complement GYRO.  CGYRO is an Eulerian GK solver specifically designed and
optimized for <strong>collisional, electromagnetic, multiscale simulation</strong>.
A key algorithmic aspect of CGYRO is the <strong>radially spectral formulation</strong>
used to reduce the complicated integral gyroaveraging kernel into a
multiplication in wavenumber space, but retaining the ability to treat profile
variation important for edge plasmas.  A new coordinate system that is more
suitable for the highly collisional and shaped edge regime was adopted from
the NEO code <a class="reference internal" href="zreferences.html#belli-2008" id="id14">[BC08]</a><a class="reference internal" href="zreferences.html#belli-2012" id="id15">[BC12]</a>, which is the community standard for
calculation of collisional transport in toroidal geometry.</p>
</div>
<div class="section" id="data-input">
<h2>Data input<a class="headerlink" href="#data-input" title="Permalink to this headline">¶</a></h2>
<p>The primary CGYRO input file is <a class="reference internal" href="cgyro/cgyro_table.html"><span class="doc">input.cgyro</span></a>.  Profile data can be optionally captured
from  <a class="reference internal" href="input_profiles.html#input-profiles"><span class="std std-ref">input.profiles</span></a>.</p>
</div>
<div class="section" id="data-output-python-interface-and-plotting">
<h2>Data output, python interface, and plotting<a class="headerlink" href="#data-output-python-interface-and-plotting" title="Permalink to this headline">¶</a></h2>
<p>Although there is a description of <a class="reference internal" href="cgyro/outputs.html"><span class="doc">output data</span></a>, it is suggested that users use the <a class="reference internal" href="cgyro/plot.html"><span class="doc">python interface</span></a> to output data.</p>
</div>
<div class="section" id="normalization">
<h2>Normalization<a class="headerlink" href="#normalization" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils" id="id16">
<caption><span class="caption-text"><strong>CGYRO Normalization</strong></span><a class="headerlink" href="#id16" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="33%" />
<col width="25%" />
<col width="42%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Quantity</th>
<th class="head">Unit</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>length</td>
<td><span class="math">\(a\)</span></td>
<td>minor radius</td>
</tr>
<tr class="row-odd"><td>mass</td>
<td><span class="math">\(m_\mathrm{D}\)</span></td>
<td>deuterium mass = <span class="math">\(3.345\times 10^{24} g\)</span></td>
</tr>
<tr class="row-even"><td>density</td>
<td><span class="math">\(n_e\)</span></td>
<td>electron density</td>
</tr>
<tr class="row-odd"><td>temperature</td>
<td><span class="math">\(T_e\)</span></td>
<td>electron temperature</td>
</tr>
<tr class="row-even"><td>velocity</td>
<td><span class="math">\(c_s = \sqrt{T_e/m_\mathrm{D}}\)</span></td>
<td>deuterium sound speed</td>
</tr>
<tr class="row-odd"><td>time</td>
<td><span class="math">\(a/c_s\)</span></td>
<td>minor radius over sound speed</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="running-cases">
<h2>Running cases<a class="headerlink" href="#running-cases" title="Permalink to this headline">¶</a></h2>
<p>Beyond the general instructions here, we also give hints for running on systems with <a class="reference internal" href="cgyro/cgyro_platforms.html"><span class="doc">public GACODE installs</span></a>.  The input files and configuration for numerous linear and nonlinear cases can
be auto-generated using the <code class="docutils literal"><span class="pre">-g</span></code> flag.  Often, it is easiest to find a template case that is close to what you would like to run, and then modify it accordingly.  A list of all regression and template cases in generated by typing:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ cgyro -g
</pre></div>
</div>
<p>A very simple nonlinear case is <code class="docutils literal"><span class="pre">nl00</span></code>.  You can generate the template with:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ cgyro -g nl00
</pre></div>
</div>
<p>It is <strong>strongly suggested</strong> that you first run your case in <em>test mode</em> using the <code class="docutils literal"><span class="pre">-t</span></code> flag:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ cgyro -t nl00
</pre></div>
</div>
<p>On the large systems at <a class="reference internal" href="cgyro/cgyro_platforms.html"><span class="doc">NERSC, ORNL and elsewhere</span></a>, you will need to establish an <strong>interactive queue</strong> to execute the command above.  The result should be diagnostics printed to the screen plus a few output files.  Pay attention to the file <code class="docutils literal"><span class="pre">out.cgyro.mpi</span></code>. This shows the acceptable number of MPI tasks.</p>
</div>
<div class="section" id="batch-submission">
<h2>Batch submission<a class="headerlink" href="#batch-submission" title="Permalink to this headline">¶</a></h2>
<p>On established platforms, the burden of writing batch script files and setting core counts is managed by the <code class="docutils literal"><span class="pre">gacode_qsub</span></code> script.  To generate a <code class="docutils literal"><span class="pre">batch.src</span></code> file, you could type:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ gacode_qsub -e nl01 -n 512 -nomp 2 -queue regular -repo atom -w 0:09:00
</pre></div>
</div>
<p>Additional flags are also accepted.  Adding the <code class="docutils literal"><span class="pre">-s</span></code> flag to the above will submit the job.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="cgyro/cgyro_table.html" class="btn btn-neutral float-right" title="Tabular list for input.cgyro" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="tgyro/plot.html" class="btn btn-neutral" title="PLOT" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2010-2018.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'',
            LANGUAGE:'en',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  <script type="text/javascript">
      jQuery(function () {
          
          SphinxRtdTheme.Navigation.enableSticky();
          
      });
  </script> 

</body>
</html>